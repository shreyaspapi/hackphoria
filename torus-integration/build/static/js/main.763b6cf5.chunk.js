(this["webpackJsonpreact-basic-app"]=this["webpackJsonpreact-basic-app"]||[]).push([[0],{275:function(e,t,n){e.exports=n(744)},280:function(e,t,n){},291:function(e,t){},312:function(e,t){},314:function(e,t){},437:function(e,t){},439:function(e,t){},468:function(e,t){},596:function(e,t){},598:function(e,t){},689:function(e,t){},702:function(e,t){},710:function(e,t){},725:function(e,t){},727:function(e,t){},734:function(e,t){},736:function(e,t){},744:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n.n(a),o=n(268),c=n.n(o),i=(n(280),n(10)),s=n.n(i),u=n(69),l=n(269),d=n(270),m=n(273),b=n(271),f=n(274),p=n(137),g=n.n(p),v=n(272),h=n.n(v),C={web3:new g.a,torus:{},setweb3:function(e){var t=new g.a(e);C.web3=t},initialize:function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new h.a,e.next=3,n.init({buildEnv:t||"production",network:{host:"rinkeby"}});case 3:return e.next=5,n.login();case 5:C.setweb3(n.provider),C.torus=n,sessionStorage.setItem("pageUsingTorus",t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=C,E=n(743),B=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={account:null,balance:"",selectedVerifier:"google",placeholder:"Enter google email",verifierId:null,buildEnv:"testing"},n.setStateInfo=function(){y.web3.eth.getAccounts().then((function(e){n.setState({account:e[0]}),y.web3.eth.getBalance(e[0]).then((function(e){n.setState({balance:e})}))}))},n.enableTorus=function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.buildEnv,t.preventDefault(),e.prev=2,e.next=5,y.initialize(a);case 5:n.setStateInfo(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),n.changeProvider=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.torus.setProvider({host:"ropsten"});case 2:n.console("finished changing provider");case 3:case"end":return e.stop()}}),e)}))),n.getUserInfo=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.torus.getUserInfo();case 2:t=e.sent,n.console(t);case 4:case"end":return e.stop()}}),e)}))),n.logout=function(){y.torus.cleanUp().then((function(){n.setState({account:"",balance:0}),sessionStorage.setItem("pageUsingTorus",!1)}))},n.signMessage=function(){y.torus.web3.currentProvider.send({method:"eth_sign",params:[n.state.account,"0x47173285a8d7341e5e972fc677286384f802f8ef42a5ec5f03bbfa254cb01fad"],from:n.state.account},(function(e,t){if(e)return console.error(e);n.console("sign message => true \n",t)}))},n.signTypedData_v1=function(){y.torus.web3.currentProvider.send({method:"eth_signTypedData",params:[[{type:"string",name:"message",value:"Hi, Alice!"},{type:"uint8",name:"value",value:10}],n.state.account],from:n.state.account},(function(e,t){if(e)return console.error(e);n.console("sign typed message v1 => true \n",t)}))},n.signTypedData_v3=function(){y.torus.web3.currentProvider.send({method:"eth_signTypedData_v3",params:[n.state.account,JSON.stringify({types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallet",type:"address"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person"},{name:"contents",type:"string"}]},primaryType:"Mail",domain:{name:"Ether Mail",version:"1",chainId:4,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},message:{from:{name:"Cow",wallet:"0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826"},to:{name:"Bob",wallet:"0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB"},contents:"Hello, Bob!"}})],from:n.state.account},(function(e,t){if(e)return console.error(e);n.console("sign typed message v3 => true \n",t)}))},n.console=function(e){document.querySelector("#console>p").innerHTML="object"===typeof e?JSON.stringify(e):e},n.signTypedData_v4=function(){y.torus.web3.currentProvider.send({method:"eth_signTypedData_v4",params:[n.state.account,JSON.stringify({types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}]},domain:{name:"Ether Mail",version:"1",chainId:4,verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC"},primaryType:"Mail",message:{from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},to:[{name:"Bob",wallets:["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}],contents:"Hello, Bob!"}})],from:n.state.account},(function(e,t){if(e)return console.error(e);n.console("sign typed message v4 => true \n",t)}))},n.sendEth=function(){var e=n.state.account;y.web3.eth.sendTransaction({from:e,to:e,value:y.web3.utils.toWei("0.01")})},n.sendDai=function(){y.torus.setProvider({host:"mainnet"}).finally((function(){var e=new y.web3.eth.Contract(E,"0x6b175474e89094c44da98b954eedeac495271d0f"),t=Math.floor(parseFloat(.01)*Math.pow(10,parseFloat(18))).toString();e.methods.transfer(n.state.account,t).send({from:n.state.account},(function(e,t){e&&n.console(e),n.console(t)}))}))},n.createPaymentTx=function(){y.torus.initiateTopup("wyre",{selectedCurrency:"USD",fiatValue:"250",selectedCryptoCurrency:"ETH"}).catch((function(e){return n.console(e.message)}))},n.getPublicAddress=function(){y.torus.getPublicAddress({verifier:n.state.selectedVerifier,verifierId:n.state.verifierId}).then(n.console)},n.onSelectedVerifierChanged=function(e){var t="Enter google email";switch(e.target.value){case"google":t="Enter google email";break;case"reddit":t="Enter reddit username";break;case"discord":t="Enter discord ID";break;default:t="Enter google email"}n.setState({selectedVerifier:e.target.value,placeholder:t})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.getItem("pageUsingTorus");t&&y.initialize(t).then((function(){e.setStateInfo()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.account,a=t.buildEnv,o=t.selectedVerifier,c=t.verifierId,i=t.placeholder,s=t.balance;return r.a.createElement("div",{className:"App"},!n&&r.a.createElement("form",{onSubmit:this.enableTorus},r.a.createElement("p",null,"Build Environment"),r.a.createElement("select",{name:"buildEnv",value:a,onChange:function(t){return e.setState({buildEnv:t.target.value})}},r.a.createElement("option",{value:"production"},"Production"),r.a.createElement("option",{value:"staging"},"Staging"),r.a.createElement("option",{value:"testing"},"Testing"),r.a.createElement("option",{value:"development"},"Development")),r.a.createElement("button",null,"Login")),n&&r.a.createElement("div",null,r.a.createElement("div",null,"Account: ",n),r.a.createElement("div",null,"Balance: ",s),r.a.createElement("button",{onClick:this.getUserInfo},"Get User Info"),r.a.createElement("button",{onClick:this.createPaymentTx},"Create Payment Tx"),r.a.createElement("button",{onClick:this.sendEth},"Send Eth"),r.a.createElement("button",{onClick:this.logout},"Logout"),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.signMessage},"sign_eth"),r.a.createElement("button",{onClick:this.signTypedData_v1},"sign typed data v1"),r.a.createElement("button",{onClick:this.signTypedData_v3},"sign typed data v3"),r.a.createElement("button",{onClick:this.signTypedData_v4},"sign typed data v4"),r.a.createElement("button",{onClick:this.changeProvider},"Change Provider"),r.a.createElement("button",{onClick:this.sendDai},"Send DAI"),r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement("select",{name:"verifier",onChange:this.onSelectedVerifierChanged,value:o},r.a.createElement("option",{defaultValue:!0,value:"google"},"Google"),r.a.createElement("option",{value:"reddit"},"Reddit"),r.a.createElement("option",{value:"discord"},"Discord")),r.a.createElement("input",{type:"email",style:{marginLeft:"20px"},onChange:function(t){return e.setState({verifierId:t.target.value})},placeholder:i})),r.a.createElement("button",{disabled:!c,style:{marginTop:"20px"},onClick:this.getPublicAddress},"Get Public Address")),r.a.createElement("div",{id:"console"},r.a.createElement("p",null)))}}]),t}(r.a.Component);c.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[275,1,2]]]);
//# sourceMappingURL=main.763b6cf5.chunk.js.map